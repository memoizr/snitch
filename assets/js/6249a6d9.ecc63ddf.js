"use strict";(self.webpackChunkguides=self.webpackChunkguides||[]).push([[498],{2023:e=>{e.exports=JSON.parse('{"permalink":"/blog/automatic-api-docs-with-snitch","editUrl":"https://github.com/memoizr/snitch/tree/main/guides/blog/2024-11-22-automatic-api-docs-with-snitch.md","source":"@site/blog/2024-11-22-automatic-api-docs-with-snitch.md","title":"Never Write API Docs Again: Snitch\'s Zero-Effort Documentation","description":"Documentation is crucial for API adoption and maintenance, yet it\'s often treated as an afterthought. Frameworks typically require extensive annotation or separate configuration files to generate documentation, leading to documentation that quickly becomes outdated. Snitch takes a radical approach: what if your code could generate complete, accurate documentation with zero additional effort?","date":"2024-11-22T00:00:00.000Z","tags":[{"inline":false,"label":"Snitch","permalink":"/blog/tags/snitch","description":"Posts about the Snitch HTTP framework for Kotlin"},{"inline":false,"label":"Documentation","permalink":"/blog/tags/documentation","description":"Content about API documentation and technical writing"},{"inline":false,"label":"OpenAPI","permalink":"/blog/tags/openapi","description":"Articles related to OpenAPI specification and tools"},{"inline":false,"label":"Developer Experience","permalink":"/blog/tags/developer-experience","description":"Content about improving the experience for developers"}],"readingTime":3.765,"hasTruncateMarker":true,"authors":[{"name":"Snitch Team","title":"Snitch Framework Maintainers","url":"https://github.com/memoizr/snitch","page":{"permalink":"/blog/authors/snitch-team"},"imageURL":"https://github.com/memoizr.png","key":"snitch-team"}],"frontMatter":{"slug":"automatic-api-docs-with-snitch","title":"Never Write API Docs Again: Snitch\'s Zero-Effort Documentation","authors":["snitch-team"],"tags":["snitch","documentation","openapi","developer-experience"]},"unlisted":false,"prevItem":{"title":"Why Shank is Superior to Spring for Dependency Injection","permalink":"/blog/shank-vs-spring-di"},"nextItem":{"title":"Spring Boot vs Snitch: A Comprehensive Comparison for Modern API Development","permalink":"/blog/spring-boot-vs-snitch"}}')},5688:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>l});var i=t(2023),a=t(4848),o=t(8453);const s={slug:"automatic-api-docs-with-snitch",title:"Never Write API Docs Again: Snitch's Zero-Effort Documentation",authors:["snitch-team"],tags:["snitch","documentation","openapi","developer-experience"]},r="Never Write API Docs Again: Snitch's Zero-Effort Documentation",c={authorsImageUrls:[void 0]},l=[{value:"The Documentation Problem",id:"the-documentation-problem",level:2},{value:"Snitch&#39;s Zero-Effort Documentation Approach",id:"snitchs-zero-effort-documentation-approach",level:2},{value:"What Gets Documented Automatically",id:"what-gets-documented-automatically",level:2},{value:"1. Routes and Methods",id:"1-routes-and-methods",level:3},{value:"2. Parameters with Validation Rules",id:"2-parameters-with-validation-rules",level:3},{value:"3. Request Bodies",id:"3-request-bodies",level:3},{value:"4. Response Types and Status Codes",id:"4-response-types-and-status-codes",level:3},{value:"5. Authorization Requirements",id:"5-authorization-requirements",level:3},{value:"Enhancing the Documentation",id:"enhancing-the-documentation",level:2},{value:"Documentation as a Living Artifact",id:"documentation-as-a-living-artifact",level:2},{value:"Real World Impact",id:"real-world-impact",level:2},{value:"Conclusion",id:"conclusion",level:2}];function d(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"Documentation is crucial for API adoption and maintenance, yet it's often treated as an afterthought. Frameworks typically require extensive annotation or separate configuration files to generate documentation, leading to documentation that quickly becomes outdated. Snitch takes a radical approach: what if your code could generate complete, accurate documentation with zero additional effort?"}),"\n",(0,a.jsx)(n.h2,{id:"the-documentation-problem",children:"The Documentation Problem"}),"\n",(0,a.jsx)(n.p,{children:"Most developers are familiar with the documentation dilemma:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Manual documentation"})," is time-consuming and quickly becomes outdated"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Annotation-based documentation"})," creates clutter and requires constant maintenance"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Separate documentation files"})," drift from the actual implementation"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Incomplete documentation"})," leads to trial-and-error API usage"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"The result is frustration for both API developers and consumers, wasted time, and buggy integrations."}),"\n",(0,a.jsx)(n.h2,{id:"snitchs-zero-effort-documentation-approach",children:"Snitch's Zero-Effort Documentation Approach"}),"\n",(0,a.jsx)(n.p,{children:"Snitch's approach is radical in its simplicity: your code is your documentation. With a single line, you can generate and serve complete OpenAPI 3.0 documentation:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-kotlin",children:"snitch(GsonJsonParser)\n    .onRoutes(routes)\n    .generateDocumentation()\n    .servePublicDocumentation()\n    .start()\n"})}),"\n",(0,a.jsxs)(n.p,{children:["This automatically creates interactive Swagger UI documentation available at ",(0,a.jsx)(n.code,{children:"/docs"}),", with no additional code or configuration required."]}),"\n",(0,a.jsx)(n.h2,{id:"what-gets-documented-automatically",children:"What Gets Documented Automatically"}),"\n",(0,a.jsx)(n.p,{children:"Snitch's documentation includes everything API consumers need to know:"}),"\n",(0,a.jsx)(n.h3,{id:"1-routes-and-methods",children:"1. Routes and Methods"}),"\n",(0,a.jsx)(n.p,{children:"The complete API structure is documented, with all paths and supported HTTP methods:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-kotlin",children:'routes {\n    "api" / "users" / {\n        GET() isHandledBy getAllUsers          // GET /api/users\n        POST() with userBody isHandledBy createUser  // POST /api/users\n        \n        userId / {\n            GET() isHandledBy getUser          // GET /api/users/{userId}\n            PUT() with userBody isHandledBy updateUser  // PUT /api/users/{userId}\n        }\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"2-parameters-with-validation-rules",children:"2. Parameters with Validation Rules"}),"\n",(0,a.jsx)(n.p,{children:"All parameters are documented with their validation rules:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-kotlin",children:'val userId by path(ofUUID, description = "Unique user identifier")\nval limit by query(ofIntRange(1, 100), default = 20, description = "Maximum number of results")\nval orderBy by query(ofEnum<SortField>(), description = "Field to sort results by")\n'})}),"\n",(0,a.jsx)(n.p,{children:"The generated documentation shows:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Parameter name, location (path, query, header)"}),"\n",(0,a.jsx)(n.li,{children:"Data type and format (string, integer, UUID, etc.)"}),"\n",(0,a.jsx)(n.li,{children:"Validation constraints (min/max, pattern, enum values)"}),"\n",(0,a.jsx)(n.li,{children:"Default values for optional parameters"}),"\n",(0,a.jsx)(n.li,{children:"Custom descriptions if provided"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"3-request-bodies",children:"3. Request Bodies"}),"\n",(0,a.jsx)(n.p,{children:"Request body schemas are automatically generated from your Kotlin classes:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-kotlin",children:"data class CreateUserRequest(\n    val name: String,\n    val email: String,\n    val age: Int\n)\n\nval userBody by body<CreateUserRequest>()\n"})}),"\n",(0,a.jsx)(n.p,{children:"The documentation includes the complete JSON schema with all properties, types, and optional custom descriptions."}),"\n",(0,a.jsx)(n.h3,{id:"4-response-types-and-status-codes",children:"4. Response Types and Status Codes"}),"\n",(0,a.jsx)(n.p,{children:"Response types are inferred from your handler code:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-kotlin",children:'GET(userId) isHandledBy {\n    val user = userRepository.findById(request[userId])\n    if (user != null) user.ok\n    else "User not found".notFound()\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:"This documents:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"200 OK response with the User schema"}),"\n",(0,a.jsx)(n.li,{children:"404 Not Found response with a string message"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"5-authorization-requirements",children:"5. Authorization Requirements"}),"\n",(0,a.jsx)(n.p,{children:"Security requirements are documented based on your conditions:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-kotlin",children:'GET("admin/dashboard") onlyIf hasAdminRole isHandledBy { getDashboard() }\n'})}),"\n",(0,a.jsx)(n.p,{children:"The documentation will show that this endpoint requires admin role authorization."}),"\n",(0,a.jsx)(n.h2,{id:"enhancing-the-documentation",children:"Enhancing the Documentation"}),"\n",(0,a.jsx)(n.p,{children:"While zero-effort documentation is powerful, Snitch also allows for enhancements:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-kotlin",children:'data class User(\n    @Description("Unique identifier") val id: UUID,\n    @Description("User\'s full name") val name: String,\n    @Description("User\'s email address") val email: String,\n    @Example("true") val active: Boolean\n)\n\nval userId by path(\n    ofUUID,\n    description = "User\'s unique identifier",\n    example = "123e4567-e89b-12d3-a456-426614174000"\n)\n'})}),"\n",(0,a.jsx)(n.p,{children:"These annotations and parameters don't affect the functionality but enhance the documentation with additional context and examples."}),"\n",(0,a.jsx)(n.h2,{id:"documentation-as-a-living-artifact",children:"Documentation as a Living Artifact"}),"\n",(0,a.jsx)(n.p,{children:"The most powerful aspect of Snitch's approach is that documentation becomes a living artifact that automatically stays in sync with your code:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Add a new endpoint?"})," It appears in the docs immediately."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Change a parameter type?"})," The documentation updates automatically."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Add a new response status?"})," It's reflected in the docs with no extra work."]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:'This ensures your documentation is always complete and accurate, eliminating the "documentation drift" that plagues many APIs.'}),"\n",(0,a.jsx)(n.h2,{id:"real-world-impact",children:"Real World Impact"}),"\n",(0,a.jsx)(n.p,{children:"The impact of automatic documentation extends beyond convenience:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Faster onboarding"})," for new team members and API consumers"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Reduced support burden"})," as API behavior is clearly documented"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"More consistent APIs"})," as documentation highlights inconsistencies"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Better developer experience"})," for API consumers"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Documentation-driven development"})," becomes effortless"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,a.jsx)(n.p,{children:"Snitch's zero-effort documentation approach challenges the conventional wisdom that comprehensive API documentation requires significant additional work. By deriving documentation directly from your code, Snitch ensures your documentation is always complete, accurate, and up-to-date."}),"\n",(0,a.jsx)(n.p,{children:"Next time you're manually updating API documentation or adding yet another annotation to describe your endpoints, remember that there's an alternative approach where documentation simply happens automatically."}),"\n",(0,a.jsx)(n.p,{children:"Give your API consumers the gift of always-accurate, comprehensive documentation - without spending a minute of your time maintaining it."})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>r});var i=t(6540);const a={},o=i.createContext(a);function s(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);